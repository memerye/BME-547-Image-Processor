
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>image_server module &#8212; Image Processor  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="initial_database module" href="initial_database.html" />
    <link rel="prev" title="image_processing module" href="image_processing.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-image_server">
<span id="image-server-module"></span><h1>image_server module<a class="headerlink" href="#module-image_server" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="image_server.add_images">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">add_images</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#image_server.add_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Post images to the database</p>
<p>Before posting new images to database, the keys and the
values in the posted json should all be validated first.
If there is anything invalid in the posted json, the server
will return error status codes with reasons.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>message to indicate the status of the server.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.add_user_id">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">add_user_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#image_server.add_user_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Post a new user to the database.</p>
<p>Before posting a new user to database, the keys and the
values in the posted json should all be validated first.
If this is the first time that this user logs into the server,
Then the new user will be registered in the server as well as
saved in the database. The “user_id” is the primary key for
each user, so it should be unique for each user. If there is
anything invalid in the posted json, the server will return
error status codes with reasons.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>message to indicate the status of the server.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.check_user_id">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">check_user_id</code><span class="sig-paren">(</span><em class="sig-param">user_id</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.check_user_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the message if this id exists in the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user_id</strong> (<em>string</em>) – The id of this user</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The bool variable of the existence of this id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>json</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.history_info">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">history_info</code><span class="sig-paren">(</span><em class="sig-param">user_id</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.history_info" title="Permalink to this definition">¶</a></dt>
<dd><p>The client function of getting user history operation list.</p>
<p>User information includes:
(1) user id
(2) the indexes of the operation
(3) the timestamp when user process the imaeg(s)
(4) the operation name
(5) the image(s) name
If the user id doesn’t exist, the server will return error
status codes with reasons.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user_id</strong> (<em>string</em>) – The user id</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>False if no existing patient.
json: a json message containing the information</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.img_process">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">img_process</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#image_server.img_process" title="Permalink to this definition">¶</a></dt>
<dd><p>Post the image information related to one processing</p>
<p>Before posting new processed images to database, the keys and
the values in the posted json should all be validated first.
If there is anything invalid in the posted json, the server
will return error status codes with reasons. The ultimately
processed images will be saved into the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>message to indicate the status of the server.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.init_server">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">init_server</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#image_server.init_server" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the logging configuration and database connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.one_history_info">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">one_history_info</code><span class="sig-paren">(</span><em class="sig-param">user_id</em>, <em class="sig-param">num</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.one_history_info" title="Permalink to this definition">¶</a></dt>
<dd><p>The client function of retrieve one of the history information</p>
<p>User information includes:
(1) user id
(2) the index of the operation
(3) uploaded time of the image(s)
(4) the operation name
(5) the size of the image(s)
(6) the CPU running time for each image processing
(7) the image name(s)
(8) the raw image(s)
(9) the processed image(s)
If the user id doesn’t exist, the server will return error
status codes with reasons.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_id</strong> (<em>string</em>) – The user id</p></li>
<li><p><strong>num</strong> (<em>int</em>) – The index of the operation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>False if no existing patient.
json: a json message containing the information</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.process_image">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">process_image</code><span class="sig-paren">(</span><em class="sig-param">img</em>, <em class="sig-param">operation</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.process_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the image with specific operation.</p>
<p>The operation are encoded as:
0 - Histogram Equalization
1 - Contrast Stretching
2 - Log Compression
3 - Invert Image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>ndarray</em>) – The posted processing image(s);</p></li>
<li><p><strong>operation</strong> (<em>int</em>) – The operation index.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed images;
float: The time needed to processing this image.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.recent_process_images">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">recent_process_images</code><span class="sig-paren">(</span><em class="sig-param">user_id</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.recent_process_images" title="Permalink to this definition">¶</a></dt>
<dd><p>The client function of processing the images that just uploaded</p>
<p>User information includes:
(1) user id
(2) uploaded time of the image(s)
(3) the operation name
(4) the size of the image(s)
(5) the CPU running time for each image processing
(6) the image name(s)
(7) the raw image(s)
(8) the processed image(s)
If the user id doesn’t exist, the server will return error
status codes with reasons.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user_id</strong> (<em>string</em>) – The user id</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>False if no existing patient.
json: a json message containing the information</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.user_info">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">user_info</code><span class="sig-paren">(</span><em class="sig-param">user_id</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.user_info" title="Permalink to this definition">¶</a></dt>
<dd><p>The client function of getting user information.</p>
<p>User information includes:
(1) user id
(2) how many images have been uploaded
(3) the total number of times of the various image processing steps.
If the user id doesn’t exist, the server will return error
status codes with reasons.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user_id</strong> (<em>string</em>) – The user id</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>False if no existing patient.
json: a json message containing the information</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.validate_data_length">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">validate_data_length</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">name</em>, <em class="sig-param">size</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.validate_data_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the total lengths of the images, their names and their sizes.</p>
<p>The total lengths of the images, their names and their size should
always be equal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>list</em>) – the posted image data.</p></li>
<li><p><strong>name</strong> (<em>list</em>) – the posted image names.</p></li>
<li><p><strong>size</strong> (<em>list</em>) – the posted image size.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the length are all equal;
False if they have different length.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.validate_id">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">validate_id</code><span class="sig-paren">(</span><em class="sig-param">user_info</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.validate_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the user id.</p>
<p>The user id can be the combination of the letters, numbers and “_”.
The whitespace in the user id would be removed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user_info</strong> (<em>dict</em>) – the posted user id.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>if the id is not valid;
string: if the id is valid.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>False</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.validate_image_keys">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">validate_image_keys</code><span class="sig-paren">(</span><em class="sig-param">image_info</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.validate_image_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the keys when posting images</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image_info</strong> (<em>dict</em>) – the posted image data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the keys are all valid;
False if it contains wrong keys.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.validate_image_names">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">validate_image_names</code><span class="sig-paren">(</span><em class="sig-param">names</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.validate_image_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the format of the image names as “name.type”.
e.g. “01.jpg”, but not “01jpg”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>names</strong> (<em>list</em>) – the posted image names.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the names are all valid;
False if it contains wrong format of names.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.validate_images">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">validate_images</code><span class="sig-paren">(</span><em class="sig-param">images</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.validate_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the format of the encoded images as strings</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>images</strong> (<em>list</em>) – the posted encoded image data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the images are all valid;
False if it contains wrong format of images.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.validate_operation">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">validate_operation</code><span class="sig-paren">(</span><em class="sig-param">process_info</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.validate_operation" title="Permalink to this definition">¶</a></dt>
<dd><p>Validation the index of the operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>process_info</strong> (<em>dict</em>) – The posted image processing data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>if the operation is not valid;
int: if the operation is valid.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>False</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.validate_process_keys">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">validate_process_keys</code><span class="sig-paren">(</span><em class="sig-param">process_info</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.validate_process_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the image processing keys</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>process_info</strong> (<em>dict</em>) – The posted image processing data</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the keys are all valid;
False if it contains wrong keys.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.validate_size">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">validate_size</code><span class="sig-paren">(</span><em class="sig-param">size</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.validate_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the format of the size of the images.</p>
<p>The “size” stores all of the images’ size as a list.
The numbers of the size should all be int.
e.g. [[200, 300, 3], [100, 150, 1]].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>size</strong> (<em>list</em>) – the posted image size.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the names are all valid;
False if it contains wrong format of names.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="image_server.validate_user_keys">
<code class="sig-prename descclassname">image_server.</code><code class="sig-name descname">validate_user_keys</code><span class="sig-paren">(</span><em class="sig-param">user_info</em><span class="sig-paren">)</span><a class="headerlink" href="#image_server.validate_user_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the keys when posting a new user.</p>
<p>The keys of this posted user information should
only contain “user_id”, otherwise it would be
regarded as wrong information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user_info</strong> (<em>dict</em>) – the posted user id.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the keys are all valid;
False if it contains wrong keys.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Image Processor</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="en_de_code.html">en_de_code module</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">gui module</a></li>
<li class="toctree-l1"><a class="reference internal" href="GUI_client.html">GUI_client module</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_client.html">image_client module</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_processing.html">image_processing module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">image_server module</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial_database.html">initial_database module</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="image_processing.html" title="previous chapter">image_processing module</a></li>
      <li>Next: <a href="initial_database.html" title="next chapter">initial_database module</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Liangyu Lucy Xiaoyu Ling.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/image_server.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>